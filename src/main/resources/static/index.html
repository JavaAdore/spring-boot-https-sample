<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="727213464024-np7uoeu22ikmp3a6unn8mp3840ls2eoh.apps.googleusercontent.com">

    <title>jQuery Example</title>
    <script>
    $(document).ready(function() {
  $.ajaxSetup({ cache: true });
  $.getScript('https://connect.facebook.net/en_US/sdk.js', function(){
    FB.init({
      appId: '2062443107418812',
      version: 'v2.7' // or v2.1, v2.2, v2.3, ...
    });
    });
});


function login()
{
FB.login(function(response) {

    if (response.authResponse) {

           $.ajax({url: "http://localhost:8888/social/facebook?facebookAccessToken=" + response.authResponse.accessToken , success: function(result){

            var myAccessToken = result.access_token;

              $.ajax({url: "http://localhost:9999/test",headers: { 'Authorization': 'bearer '+myAccessToken} ,  success: function(result){
                 console.log(result);
               }});

          }
    });

    } else {
     console.log('User cancelled login or did not fully authorize.');
    }
},{scope: 'public_profile,email,user_birthday'});
}


function onSignIn(googleUser) {
  var profile = googleUser.getBasicProfile();

    var id_token = googleUser.getAuthResponse().id_token;

         $.ajax({url: "http://localhost:8888/social/google?clientIdToken=" + id_token , success: function(result){

            var myAccessToken = result.access_token;
                console.log(result.access_token);

              $.ajax({url: "http://localhost:9999/test",headers: { 'Authorization': 'bearer '+myAccessToken} ,  success: function(result){
                 console.log(result);
               }});

          }
    });

}


  </script>
</head>
<body>
<button onclick="login()">login With facebook</button>

<div class="g-signin2" data-onsuccess="onSignIn"></div>


</body>

</html>